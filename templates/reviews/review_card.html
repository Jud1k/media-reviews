<div class="bg-white rounded-xl shadow-sm border p-6 mb-4 fade-in {% if new %}border-l-4 border-green-500 animate-pulse{% endif %}"
     id="review-{{ review.pk }}">
    
    <div class="flex justify-between items-start">
        <div>
            <h3 class="text-xl font-bold text-gray-800">{{ review.title }}</h3>
            <div class="flex items-center space-x-3 mt-2">
                <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium">
                    {{ review.get_media_type_display }}
                </span>
                <div class="flex items-center">
                    <span class="text-yellow-500 font-bold">{{ review.rating }}</span>
                    <span class="text-gray-400 ml-1">/10</span>
                </div>
                <span class="text-gray-500 text-sm">
                    {{ review.created_at|date:"M d, Y" }}
                </span>
            </div>
        </div>
        
        <div class="text-gray-400">
            <i class="fas fa-ellipsis-v"></i>
        </div>
    </div>
    
    <div class="mt-4 text-gray-600">
        {{ review.content|linebreaks|truncatewords:50 }}
        {% if review.content|wordcount > 50 %}
        <button class="text-purple-600 hover:text-purple-800 text-sm font-medium">
            Read more...
        </button>
        {% endif %}
    </div>
    
    <!-- Успешное сообщение -->
    {% if new %}
    <div class="mt-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between">
        <div class="flex items-center">
            <i class="fas fa-check-circle text-green-600 mr-2"></i>
            <span class="text-green-800">Review added successfully!</span>
        </div>
        <button onclick="this.parentElement.remove()" class="text-green-600 hover:text-green-800">
            <i class="fas fa-times"></i>
        </button>
    </div>
    {% endif %}
</div>

<script>
    // Анимация появления
    document.addEventListener('DOMContentLoaded', function() {
        const card = document.querySelector('#review-{{ review.pk }}');
        if (card && {{ new|yesno:"true,false" }}) {
            // Прокручиваем к новой карточке
            card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            // Убираем анимацию пульсации через 2 секунды
            setTimeout(() => {
                card.classList.remove('animate-pulse');
            }, 2000);
        }
    });
</script>